![image](https://github.com/user-attachments/assets/48da823b-924e-4066-99e4-4d621c14c93c)
# ZombieFactory DApp

## Chương 14: Web3.js

Trong chương này, chúng ta sẽ sử dụng thư viện **Web3.js** của Ethereum để tạo một frontend JavaScript tương tác với hợp đồng thông minh mà chúng ta đã viết.

### Web3.js

Web3.js là một thư viện JavaScript giúp tương tác với Ethereum, cho phép giao tiếp với các hợp đồng đã triển khai trên blockchain.

### Tương tác với Hợp đồng

- **ABI**: Được sinh ra từ trình biên dịch Solidity. Đây là mã xác định giao diện của hợp đồng để Web3.js có thể tương tác.
- **Contract Address**: Sau khi triển khai hợp đồng, ta sử dụng địa chỉ này để tham chiếu đến hợp đồng.

#### Ví dụ Tương tác với Hợp đồng
```javascript
var abi = /* abi generated by the compiler */
var ZombieFactoryContract = web3.eth.contract(abi)
var contractAddress = /* our contract address on Ethereum after deploying */
var ZombieFactory = ZombieFactoryContract.at(contractAddress)
```

### Tạo Zombie và Cập Nhật UI

- **createRandomZombie**: Gọi hàm từ hợp đồng để tạo Zombie mới.
- **NewZombie Event**: Lắng nghe sự kiện khi một Zombie mới được tạo và cập nhật giao diện.

#### Ví dụ Tạo Zombie
```javascript
ZombieFactory.createRandomZombie(name)
ZombieFactory.NewZombie(function(error, result) {
  if (error) return
  generateZombie(result.zombieId, result.name, result.dna)
})
```
### Xử lý chuỗi DNA
Dựa trên chuỗi DNA, các đặc điểm của Zombie như đầu, mắt, áo, và màu da được tính toán.

### Ví dụ Xử lý DNA 
```javascript
function generateZombie(id, name, dna) {
  let dnaStr = String(dna)
  while (dnaStr.length < 16) dnaStr = "0" + dnaStr

  let zombieDetails = {
    headChoice: dnaStr.substring(0, 2) % 7 + 1,
    eyeChoice: dnaStr.substring(2, 4) % 11 + 1,
    shirtChoice: dnaStr.substring(4, 6) % 6 + 1,
    skinColorChoice: parseInt(dnaStr.substring(6, 8) / 100 * 360),
    eyeColorChoice: parseInt(dnaStr.substring(8, 10) / 100 * 360),
    clothesColorChoice: parseInt(dnaStr.substring(10, 12) / 100 * 360),
    zombieName: name,
    zombieDescription: "A Level 1 CryptoZombie",
  }
  return zombieDetails
}
```
Chúng ta sẽ học chi tiết hơn về cách triển khai và sử dụng Web3.js trong bài học sau.

